{"ast":null,"code":"import \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport _slicedToArray from \"/app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/app/src/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { createContext, useReducer, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\"; // Router\n\nimport Router from \"./router\";\nimport Login from \"./pages/Login\";\nimport \"./App.less\";\nimport locale from 'antd/lib/locale/es_ES';\n\nrequire('dotenv').config();\n\nexport const AuthContext = createContext();\nconst initialState = {\n  isAuthenticated: false,\n  user: null,\n  token: null\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      localStorage.setItem(\"user\", JSON.stringify(action.payload.user));\n      localStorage.setItem(\"token\", JSON.stringify(action.payload.token));\n      return _objectSpread({}, state, {\n        isAuthenticated: true,\n        user: action.payload.user,\n        token: action.payload.token\n      });\n\n    case \"LOGOUT\":\n      localStorage.clear();\n      return _objectSpread({}, state, {\n        isAuthenticated: false,\n        user: null\n      });\n\n    default:\n      return state;\n  }\n};\n\nfunction App({\n  history\n}) {\n  const _useReducer = useReducer(reducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1];\n\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem(\"user\") || null);\n\n    if (user) {\n      dispatch({\n        type: \"LOGIN\",\n        payload: {\n          user\n        }\n      });\n    }\n  }, []);\n  return React.createElement(AuthContext.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(_ConfigProvider, {\n    locale: locale,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, !state.isAuthenticated ? React.createElement(Login, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }) : React.createElement(Router, {\n    history: history,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }))));\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/app/src/App.js"],"names":["React","createContext","useReducer","useEffect","withRouter","Router","Login","locale","require","config","AuthContext","initialState","isAuthenticated","user","token","reducer","state","action","type","localStorage","setItem","JSON","stringify","payload","clear","App","history","dispatch","parse","getItem"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,SAA3C,QAA4D,OAA5D;AACA,SAASC,UAAT,QAA2B,kBAA3B,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AAEA,OAAO,YAAP;AAGA,OAAOC,MAAP,MAAmB,uBAAnB;;AAEAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAEA,OAAO,MAAMC,WAAW,GAAGT,aAAa,EAAjC;AAEP,MAAMU,YAAY,GAAG;AACnBC,EAAAA,eAAe,EAAE,KADE;AAEnBC,EAAAA,IAAI,EAAE,IAFa;AAGnBC,EAAAA,KAAK,EAAE;AAHY,CAArB;;AAMA,MAAMC,OAAO,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACjC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,OAAL;AACEC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeL,MAAM,CAACM,OAAP,CAAeV,IAA9B,CAA7B;AACAM,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,IAAI,CAACC,SAAL,CAAeL,MAAM,CAACM,OAAP,CAAeT,KAA9B,CAA9B;AACA,+BACKE,KADL;AAEEJ,QAAAA,eAAe,EAAE,IAFnB;AAGEC,QAAAA,IAAI,EAAEI,MAAM,CAACM,OAAP,CAAeV,IAHvB;AAIEC,QAAAA,KAAK,EAAEG,MAAM,CAACM,OAAP,CAAeT;AAJxB;;AAMF,SAAK,QAAL;AACEK,MAAAA,YAAY,CAACK,KAAb;AACA,+BACKR,KADL;AAEEJ,QAAAA,eAAe,EAAE,KAFnB;AAGEC,QAAAA,IAAI,EAAE;AAHR;;AAKF;AACE,aAAOG,KAAP;AAlBJ;AAoBD,CArBD;;AAuBA,SAASS,GAAT,CAAa;AAAEC,EAAAA;AAAF,CAAb,EAA0B;AAAA,sBACExB,UAAU,CAACa,OAAD,EAAUJ,YAAV,CADZ;AAAA;AAAA,QACjBK,KADiB;AAAA,QACVW,QADU;;AAGxBxB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMU,IAAI,GAAGQ,IAAI,CAACO,KAAL,CAAWT,YAAY,CAACU,OAAb,CAAqB,MAArB,KAAgC,IAA3C,CAAb;;AAEA,QAAIhB,IAAJ,EAAU;AACRc,MAAAA,QAAQ,CAAC;AACPT,QAAAA,IAAI,EAAE,OADC;AAEPK,QAAAA,OAAO,EAAE;AACPV,UAAAA;AADO;AAFF,OAAD,CAAR;AAMD;AACF,GAXQ,EAWN,EAXM,CAAT;AAaA,SACE,oBAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLG,MAAAA,KADK;AAELW,MAAAA;AAFK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME;AAAgB,IAAA,MAAM,EAAEpB,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAsB,CAACS,KAAK,CAACJ,eAAP,GAAyB,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAzB,GAAqC,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEc,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA3D,CADF,CANF,CADF;AAYD;;AAED,eAAetB,UAAU,CAACqB,GAAD,CAAzB","sourcesContent":["import React, { createContext, useReducer, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\n// Router\nimport Router from \"./router\";\nimport Login from \"./pages/Login\";\n\nimport \"./App.less\";\n\nimport { ConfigProvider } from 'antd';\nimport locale from 'antd/lib/locale/es_ES';\n\nrequire('dotenv').config()\n\nexport const AuthContext = createContext();\n\nconst initialState = {\n  isAuthenticated: false,\n  user: null,\n  token: null\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      localStorage.setItem(\"user\", JSON.stringify(action.payload.user));\n      localStorage.setItem(\"token\", JSON.stringify(action.payload.token));\n      return {\n        ...state,\n        isAuthenticated: true,\n        user: action.payload.user,\n        token: action.payload.token\n      };\n    case \"LOGOUT\":\n      localStorage.clear();\n      return {\n        ...state,\n        isAuthenticated: false,\n        user: null\n      };\n    default:\n      return state;\n  }\n};\n\nfunction App({ history }) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem(\"user\") || null);\n\n    if (user) {\n      dispatch({\n        type: \"LOGIN\",\n        payload: {\n          user\n        }\n      });\n    }\n  }, []);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        state,\n        dispatch\n      }}\n    >\n      <ConfigProvider locale={locale}>\n        <div className=\"App\">{!state.isAuthenticated ? <Login /> : <Router history={history} />}</div>\n      </ConfigProvider>\n    </AuthContext.Provider>\n  );\n}\n\nexport default withRouter(App);\n\n"]},"metadata":{},"sourceType":"module"}